<div class="container">
    <h3 class="text-center">Planner</h3>
    <div data-ng-if="!calendarCtrl.operations.getTasks.status"
         class="row">
        <div class="col-xs-12">
            <h2 data-ng-bind="calendarCtrl.viewState.selectedDate | date: 'MMMM yyyy'"
                class="text-center"></h2>
            <div data-date-selector
                 data-view-state="calendarCtrl.viewState"
                 data-api="calendarCtrl.dateSelectorAPI"
                 data-on-change="calendarCtrl.loadDatesOfMonth(calendarCtrl.viewState.selectedDate)"></div>
            <div class="row">
                <div class="col-xs-3">
                    <div class="form-group">
                        <label>Task</label>
                        <input data-ng-model="calendarCtrl.viewState.input.name"
                               data-ng-disabled="calendarCtrl.operations.addTask.status === 'LOADING'"
                               placeholder="Enter your task name or description..."
                               class="form-control"
                               maxlength="500"/>
                    </div>
                </div>
                <div class="col-xs-3">
                    <div class="form-group">
                        <label>Due Date</label>
                        <div data-date-input-field
                             data-model="calendarCtrl.viewState.input.timestampDue"
                             data-config="datePickerConfig"
                             data-is-disabled="operations.editTask.status === 'LOADING'"></div>
                    </div>
                </div>
                <div class="col-xs-1">
                    <button class="btn btn-success inline-button"
                            data-ng-click="calendarCtrl.addTask(calendarCtrl.viewState.input)"
                            data-ng-disabled="calendarCtrl.operations.addTask.status === 'LOADING'"
                            title="Add a new task to the To Do List."
                            style="margin-top: 24px;">
                        <span data-ng-if="calendarCtrl.operations.addTask.status !== 'LOADING'" class="fa fa-plus"></span>
                        <span data-ng-if="calendarCtrl.operations.addTask.status === 'LOADING'" class="fa fa-spin fa-spinner"></span>
                        Add Task
                    </button>
                </div>
            </div>

            <label>Tags:</label>
            <div data-tag-display
                 data-tags="calendarCtrl.usedTags"
                 data-tags-to-filter-by="calendarCtrl.viewState.tagsToFilterBy"></div>
            <button data-ng-click="calendarCtrl.viewState.isShowingScheduled = !calendarCtrl.viewState.isShowingScheduled"
                    class="btn btn-xs btn-link pull-right">
                <span data-ng-if="!calendarCtrl.viewState.isShowingScheduled">Show Scheduled Tasks</span>
                <span data-ng-if="calendarCtrl.viewState.isShowingScheduled">Show Unscheduled Tasks</span>
            </button>
            <div class="row">
                <div class="col-xs-12">
                    <div data-ng-if="calendarCtrl.viewState.isShowingScheduled"
                         data-ng-include data-src="'modules/task/planner/calendar/ScheduledTasksTable.html'"></div>
                    <div data-ng-if="!calendarCtrl.viewState.isShowingScheduled"
                         data-ng-include data-src="'modules/task/planner/calendar/UnscheduledTasksTable.html'"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <h3 data-ng-if="calendarCtrl.operations.getTasks.status === 'LOADING'"
            class="text-center">
            <span class="fa fa-spin fa-spinner"></span> Loading calendar...
        </h3>
        <h3 data-ng-if="calendarCtrl.operations.getTasks.status === 'ERROR'"
            class="text-center">
            A server error occurred while loading the calendar.
        </h3>
    </div>
</div>